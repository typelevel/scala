<html><head><meta charset="utf-8" /><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /><title>Typelevel</title><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="description" content="Our fork of the Scala compiler" /><meta name="author" content="Typelevel contributors" /><meta name="og:image" content="/scala/img/poster.png" /><meta name="og:title" content="Typelevel" /><meta name="og:site_name" content="Typelevel" /><meta name="og:url" content="http://typelevel.org/scala" /><meta name="og:type" content="website" /><meta name="og:description" content="Our fork of the Scala compiler" /><meta name="twitter:image" content="/scala/img/poster.png" /><meta name="twitter:card" content="summary_large_image" /><meta name="twitter:site" content="" /><link rel="icon" type="image/png" href="/scala/img/favicon.png" /><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" /><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css" /><link rel="stylesheet" href="/scala/highlight/styles/atom-one-light.css" /><link rel="stylesheet" href="/scala/css/style.css" /><link rel="stylesheet" href="/scala/css/palette.css" /><link rel="stylesheet" href="/scala/css/override.css" /></head><body class="docs"><div id="wrapper"><div id="sidebar-wrapper"><ul id="sidebar" class="sidebar-nav"><li class="sidebar-brand"><a href="/scala/" class="brand"><div class="brand-wrapper" style="background:url('/scala/img/sidebar_brand.png') no-repeat"><span>Typelevel</span></div></a></li> <li><a href="/scala/docs/index.html" class="">Getting Started</a></li> <li><a href="/scala/docs/basic_structure.html" class="">Basic structure</a></li> <li><a href="/scala/docs/project_structure.html" class="">Project folders</a></li> <li><a href="/scala/docs/phases.html" class="">Compiler phases</a></li> <li><a href="/scala/docs/trees.html" class="">Trees</a></li> <li><a href="/scala/docs/symbols.html" class="">Symbols</a></li> <li><a href="/scala/docs/types.html" class="">Types</a></li> <li><a href="/scala/docs/references.html" class="">References</a></li></ul></div><div id="page-content-wrapper"><div class="nav"><div class="container-fluid"><div class="row"><div class="col-lg-12"><div class="action-menu pull-left clearfix"><a href="#menu-toggle" id="menu-toggle"><i class="fa fa-bars" aria-hidden="true"></i></a></div><ul class="pull-right"><li class="hidden-xs"><a href="https://github.com/typelevel/scala"><i class="fa fa-eye"></i><span>WATCH<span id="eyes" class="label label-default">--</span></span></a></li><li class="hidden-xs"><a href="https://github.com/typelevel/scala"><i class="fa fa-star-o"></i><span>STARS<span id="stars" class="label label-default">--</span></span></a></li><li><a href="#" onclick="shareSiteTwitter('Typelevel Our fork of the Scala compiler');"><i class="fa fa-twitter"></i></a></li><li><a href="#" onclick="shareSiteFacebook('Typelevel Our fork of the Scala compiler');"><i class="fa fa-facebook"></i></a></li><li><a href="#" onclick="shareSiteGoogle();"><i class="fa fa-google-plus"></i></a></li></ul></div></div></div></div><div id="content" data-github-owner="typelevel" data-github-repo="scala"><div class="content-wrapper"><section><p>The Scala compiler has to do a lot of work to turn your code into jvm bytecode that can be executed. For several reasons, this work is broken into steps which are executed sequentially, the so called <em>phases</em> of the compiler.</p>

<h2 id="the-phases">The Phases</h2>

<p>If you want to see the phases listed, simply run in your terminal:</p>

<div class="language-scala highlighter-rouge"><pre class="highlight"><code><span class="n">$</span> <span class="n">scalac</span> <span class="o">-</span><span class="nc">Xshow</span><span class="o">-</span><span class="n">phases</span>
<span class="nc">Picked</span> <span class="n">up</span> <span class="nc">JAVA_TOOL_OPTIONS</span><span class="k">:</span> <span class="kt">-Dfile.encoding</span><span class="o">=</span><span class="nc">UTF</span><span class="o">-</span><span class="mi">8</span>

    <span class="n">phase</span> <span class="n">name</span>  <span class="n">id</span>  <span class="n">description</span>
    <span class="o">----------</span>  <span class="o">--</span>  <span class="o">-----------</span>
        <span class="n">parser</span>   <span class="mi">1</span>  <span class="n">parse</span> <span class="n">source</span> <span class="n">into</span> <span class="nc">ASTs</span><span class="o">,</span> <span class="n">perform</span> <span class="n">simple</span> <span class="n">desugaring</span>
         <span class="n">namer</span>   <span class="mi">2</span>  <span class="n">resolve</span> <span class="n">names</span><span class="o">,</span> <span class="n">attach</span> <span class="n">symbols</span> <span class="n">to</span> <span class="n">named</span> <span class="n">trees</span>
<span class="n">packageobjects</span>   <span class="mi">3</span>  <span class="n">load</span> <span class="k">package</span> <span class="nn">objects</span>
         <span class="n">typer</span>   <span class="mi">4</span>  <span class="n">the</span> <span class="n">meat</span> <span class="n">and</span> <span class="n">potatoes</span><span class="k">:</span> <span class="k">type</span> <span class="kt">the</span> <span class="kt">trees</span>
        <span class="n">patmat</span>   <span class="mi">5</span>  <span class="n">translate</span> <span class="k">match</span> <span class="n">expressions</span>
<span class="n">superaccessors</span>   <span class="mi">6</span>  <span class="n">add</span> <span class="k">super</span> <span class="n">accessors</span> <span class="n">in</span> <span class="n">traits</span> <span class="n">and</span> <span class="n">nested</span> <span class="n">classes</span>
    <span class="n">extmethods</span>   <span class="mi">7</span>  <span class="n">add</span> <span class="n">extension</span> <span class="n">methods</span> <span class="k">for</span> <span class="n">inline</span> <span class="n">classes</span>
       <span class="n">pickler</span>   <span class="mi">8</span>  <span class="n">serialize</span> <span class="n">symbol</span> <span class="n">tables</span>
     <span class="n">refchecks</span>   <span class="mi">9</span>  <span class="n">reference</span><span class="o">/</span><span class="k">override</span> <span class="n">checking</span><span class="o">,</span> <span class="n">translate</span> <span class="n">nested</span> <span class="n">objects</span>
       <span class="n">uncurry</span>  <span class="mi">10</span>  <span class="n">uncurry</span><span class="o">,</span> <span class="n">translate</span> <span class="n">function</span> <span class="n">values</span> <span class="n">to</span> <span class="n">anonymous</span> <span class="n">classes</span>
     <span class="n">tailcalls</span>  <span class="mi">11</span>  <span class="n">replace</span> <span class="n">tail</span> <span class="n">calls</span> <span class="n">by</span> <span class="n">jumps</span>
    <span class="n">specialize</span>  <span class="mi">12</span>  <span class="n">specialized</span><span class="o">-</span><span class="n">driven</span> <span class="k">class</span> <span class="nc">and</span> <span class="n">method</span> <span class="n">specialization</span>
 <span class="n">explicitouter</span>  <span class="mi">13</span>  <span class="k">this</span> <span class="n">refs</span> <span class="n">to</span> <span class="n">outer</span> <span class="n">pointers</span>
       <span class="n">erasure</span>  <span class="mi">14</span>  <span class="n">erase</span> <span class="n">types</span><span class="o">,</span> <span class="n">add</span> <span class="n">interfaces</span> <span class="k">for</span> <span class="n">traits</span>
   <span class="n">posterasure</span>  <span class="mi">15</span>  <span class="n">clean</span> <span class="n">up</span> <span class="n">erased</span> <span class="n">inline</span> <span class="n">classes</span>
      <span class="n">lazyvals</span>  <span class="mi">16</span>  <span class="n">allocate</span> <span class="n">bitmaps</span><span class="o">,</span> <span class="n">translate</span> <span class="k">lazy</span> <span class="n">vals</span> <span class="n">into</span> <span class="n">lazified</span> <span class="n">defs</span>
    <span class="n">lambdalift</span>  <span class="mi">17</span>  <span class="n">move</span> <span class="n">nested</span> <span class="n">functions</span> <span class="n">to</span> <span class="n">top</span> <span class="n">level</span>
  <span class="n">constructors</span>  <span class="mi">18</span>  <span class="n">move</span> <span class="n">field</span> <span class="n">definitions</span> <span class="n">into</span> <span class="n">constructors</span>
       <span class="n">flatten</span>  <span class="mi">19</span>  <span class="n">eliminate</span> <span class="n">inner</span> <span class="n">classes</span>
         <span class="n">mixin</span>  <span class="mi">20</span>  <span class="n">mixin</span> <span class="n">composition</span>
       <span class="n">cleanup</span>  <span class="mi">21</span>  <span class="n">platform</span><span class="o">-</span><span class="n">specific</span> <span class="n">cleanups</span><span class="o">,</span> <span class="n">generate</span> <span class="n">reflective</span> <span class="n">calls</span>
    <span class="n">delambdafy</span>  <span class="mi">22</span>  <span class="n">remove</span> <span class="n">lambdas</span>
         <span class="n">icode</span>  <span class="mi">23</span>  <span class="n">generate</span> <span class="n">portable</span> <span class="n">intermediate</span> <span class="n">code</span>
           <span class="n">jvm</span>  <span class="mi">24</span>  <span class="n">generate</span> <span class="nc">JVM</span> <span class="n">bytecode</span>
      <span class="n">terminal</span>  <span class="mi">25</span>  <span class="n">the</span> <span class="n">last</span> <span class="n">phase</span> <span class="n">during</span> <span class="n">a</span> <span class="n">compilation</span> <span class="n">run</span>
</code></pre>
</div>

<p>As you can see above, at the time of this writing the compiler uses 25 phases that start with a <em>parser</em> of the code and end with the <em>terminal</em> phase, that ends the compilation.</p>

<p>Please note that the reality of the compiler is not as clean as this documentation would have you believe. Due to efficiency and other concerns, some phases are intertwined and they should be considered a single phase in itself. In other cases some phases do more than advertised.</p>

<h3 id="phases-in-the-compiler">Phases in the Compiler</h3>

<p>If you open your compiler codebase and go to class <code class="highlighter-rouge">Global</code>, line 405, you will see:</p>

<div class="language-scala highlighter-rouge"><pre class="highlight"><code> <span class="c1">// phaseName = "parser"
</span>  <span class="k">lazy</span> <span class="k">val</span> <span class="n">syntaxAnalyzer</span> <span class="k">=</span> <span class="k">new</span> <span class="o">{</span>
    <span class="k">val</span> <span class="n">global</span><span class="k">:</span> <span class="kt">Global.this.</span><span class="k">type</span> <span class="o">=</span> <span class="nc">Global</span><span class="o">.</span><span class="k">this</span>
  <span class="o">}</span> <span class="k">with</span> <span class="nc">SyntaxAnalyzer</span> <span class="o">{</span>
    <span class="k">val</span> <span class="n">runsAfter</span> <span class="k">=</span> <span class="nc">List</span><span class="o">[</span><span class="kt">String</span><span class="o">]()</span>
    <span class="k">val</span> <span class="n">runsRightAfter</span> <span class="k">=</span> <span class="nc">None</span>
    <span class="k">override</span> <span class="k">val</span> <span class="n">initial</span> <span class="k">=</span> <span class="kc">true</span>
  <span class="o">}</span>
</code></pre>
</div>

<p>This corresponds to the first phase of the compiler, <code class="highlighter-rouge">parser</code>. All the phases are defined as <code class="highlighter-rouge">lazy val</code>, in order, after this entry.</p>

<p>If you want to learn more about a specific phase you can always go to the class implementing it. In the example above, that would be <code class="highlighter-rouge">SyntaxAnalyzer</code>. Most of the phases have documentation that explains the function of the phase.</p>

<p>Some things that may not be obvious from reading the documentation of the phases, but are relevant:</p>

<ul>
  <li><code class="highlighter-rouge">parser</code>, the very first phase, tackles a lot of syntactic sugar. For example, at the end of this phase <em>for-comprehensions</em> will have been transformed into a series of <em>flatMap</em>, <em>map</em>, and <em>filter</em>.</li>
  <li><code class="highlighter-rouge">namer</code>, <code class="highlighter-rouge">packageobjects</code>, and <code class="highlighter-rouge">typer</code> (phases 2,3, and 4) are effectively a single phase. Although split into 3 elements for implementation reasons, the dependencies between them means you can consider it one.</li>
  <li>After <code class="highlighter-rouge">typer</code> (phase 4) completes, all the typechecking has been completed. For example, any error due to Type classes missing an implicit implementation will happen at this stage. The remaining 20 phases work with code that type-checks. Guaranteed ;)</li>
  <li><code class="highlighter-rouge">pickler</code> (phase 8) generates attributes for class files which are later on used for compilation against binaries. This is what allows you to use a certain jar file as a library without having to bring the source code of the library along.</li>
  <li><code class="highlighter-rouge">uncurry</code> (phase 10) turns functions (like <code class="highlighter-rouge">val f: Int =&gt; Int</code>) to anonymous classes. In JVM 8 this benefits from new structures introduced to work with lambdas.</li>
  <li><code class="highlighter-rouge">lambalift</code> (phase 17) lifts nested functions outside of methods, a different task that <code class="highlighter-rouge">uncurry</code></li>
  <li><code class="highlighter-rouge">constructors</code> (phase 18) generates the constructors for the classes. Keep in mind Scala constructors are very different to the ones expected by the jvm (for instance any expression in the body of a class is executed during construction) so there’ quite a bit going on in this phase.</li>
</ul>

<h2 id="example">Example</h2>

<p>If we talk about phases we want to mention the <code class="highlighter-rouge">-Xprint</code> flag in <code class="highlighter-rouge">scalac</code>. This flag allows you to see the differences between phases.</p>

<p>To test it, create a file with the following code:</p>

<div class="language-scala highlighter-rouge"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Foo</span><span class="o">{</span>
  <span class="k">val</span> <span class="n">i</span> <span class="k">=</span> <span class="mi">23</span>
  <span class="k">val</span> <span class="n">j</span> <span class="k">=</span> <span class="s">"blah"</span>
  <span class="k">val</span> <span class="n">k</span> <span class="k">=</span> <span class="n">i</span><span class="o">+</span><span class="n">j</span>

  <span class="k">def</span> <span class="n">wibble</span> <span class="k">=</span> <span class="o">{</span>
    <span class="k">for</span><span class="o">(</span><span class="n">c</span> <span class="k">&lt;-</span> <span class="n">k</span><span class="o">)</span> <span class="k">yield</span> <span class="n">c</span><span class="o">*</span><span class="mi">2</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre>
</div>

<p>and compile it with:</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>scalac -Xprint:all &lt;youfile&gt;.scala
</code></pre>
</div>

<p>You will see the compiler outputs the code as it’s seen after each phase that modified something. For example the output will show that after the parser phase the output looks like:</p>

<div class="language-scala highlighter-rouge"><pre class="highlight"><code><span class="o">[[</span><span class="kt">syntax</span> <span class="kt">trees</span> <span class="kt">at</span> <span class="kt">end</span> <span class="kt">of</span>                    <span class="kt">parser</span><span class="o">]]</span> <span class="c1">// sample.scala
</span><span class="k">package</span> <span class="err">&lt;</span><span class="nn">empty</span><span class="o">&gt;</span> <span class="o">{</span>
  <span class="k">class</span> <span class="nc">Foo</span> <span class="k">extends</span> <span class="n">scala</span><span class="o">.</span><span class="nc">AnyRef</span> <span class="o">{</span>
    <span class="k">def</span> <span class="o">&lt;</span><span class="n">init</span><span class="o">&gt;()</span> <span class="k">=</span> <span class="o">{</span>
      <span class="k">super</span><span class="o">.&lt;</span><span class="n">init</span><span class="o">&gt;();</span>
      <span class="o">()</span>
    <span class="o">};</span>
    <span class="k">val</span> <span class="n">i</span> <span class="k">=</span> <span class="mi">23</span><span class="o">;</span>
    <span class="k">val</span> <span class="n">j</span> <span class="k">=</span> <span class="s">"blah"</span><span class="o">;</span>
    <span class="k">val</span> <span class="n">k</span> <span class="k">=</span> <span class="n">i</span><span class="o">.</span><span class="nc">$plus</span><span class="o">(</span><span class="n">j</span><span class="o">);</span>
    <span class="k">def</span> <span class="n">wibble</span> <span class="k">=</span> <span class="n">k</span><span class="o">.</span><span class="n">map</span><span class="o">(((</span><span class="n">c</span><span class="o">)</span> <span class="k">=&gt;</span> <span class="n">c</span><span class="o">.</span><span class="nc">$times</span><span class="o">(</span><span class="mi">2</span><span class="o">)))</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre>
</div>

<p>You can notice the class is now inside a package <code class="highlighter-rouge">empty</code> as we didn’t declare any package. You can see a method <code class="highlighter-rouge">&lt;init&gt;</code> that acts like a pseudo-constructor has been added, the <code class="highlighter-rouge">+</code> operation assigned to <code class="highlighter-rouge">k</code> has been expanded to a method <code class="highlighter-rouge">$plus</code>, and the for comprehension of <code class="highlighter-rouge">wibble</code> has been expanded to a <code class="highlighter-rouge">map</code> call.</p>

<p>Quite a lot has changed in just the first phase :) After typing finishes we get the following output:</p>

<div class="language-scala highlighter-rouge"><pre class="highlight"><code><span class="o">[[</span><span class="kt">syntax</span> <span class="kt">trees</span> <span class="kt">at</span> <span class="kt">end</span> <span class="kt">of</span>                     <span class="kt">namer</span><span class="o">]]</span> <span class="c1">// sample.scala: tree is unchanged since parser
</span><span class="o">[[</span><span class="kt">syntax</span> <span class="kt">trees</span> <span class="kt">at</span> <span class="kt">end</span> <span class="kt">of</span>            <span class="kt">packageobjects</span><span class="o">]]</span> <span class="c1">// sample.scala: tree is unchanged since parser
</span><span class="o">[[</span><span class="kt">syntax</span> <span class="kt">trees</span> <span class="kt">at</span> <span class="kt">end</span> <span class="kt">of</span>                     <span class="k">type</span><span class="kt">r</span><span class="o">]]</span> <span class="c1">// sample.scala
</span><span class="k">package</span> <span class="err">&lt;</span><span class="nn">empty</span><span class="o">&gt;</span> <span class="o">{</span>
  <span class="k">class</span> <span class="nc">Foo</span> <span class="k">extends</span> <span class="n">scala</span><span class="o">.</span><span class="nc">AnyRef</span> <span class="o">{</span>
    <span class="k">def</span> <span class="o">&lt;</span><span class="n">init</span><span class="o">&gt;()</span><span class="k">:</span> <span class="kt">Foo</span> <span class="o">=</span> <span class="o">{</span>
      <span class="nc">Foo</span><span class="o">.</span><span class="k">super</span><span class="o">.&lt;</span><span class="n">init</span><span class="o">&gt;();</span>
      <span class="o">()</span>
    <span class="o">};</span>
    <span class="k">private</span><span class="o">[</span><span class="kt">this</span><span class="o">]</span> <span class="k">val</span> <span class="n">i</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="mi">23</span><span class="o">;</span>
    <span class="o">&lt;</span><span class="n">stable</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">accessor</span><span class="o">&gt;</span> <span class="k">def</span> <span class="n">i</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="nc">Foo</span><span class="o">.</span><span class="k">this</span><span class="o">.</span><span class="n">i</span><span class="o">;</span>
    <span class="k">private</span><span class="o">[</span><span class="kt">this</span><span class="o">]</span> <span class="k">val</span> <span class="n">j</span><span class="k">:</span> <span class="kt">String</span> <span class="o">=</span> <span class="s">"blah"</span><span class="o">;</span>
    <span class="o">&lt;</span><span class="n">stable</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">accessor</span><span class="o">&gt;</span> <span class="k">def</span> <span class="n">j</span><span class="k">:</span> <span class="kt">String</span> <span class="o">=</span> <span class="nc">Foo</span><span class="o">.</span><span class="k">this</span><span class="o">.</span><span class="n">j</span><span class="o">;</span>
    <span class="k">private</span><span class="o">[</span><span class="kt">this</span><span class="o">]</span> <span class="k">val</span> <span class="n">k</span><span class="k">:</span> <span class="kt">String</span> <span class="o">=</span> <span class="nc">Foo</span><span class="o">.</span><span class="k">this</span><span class="o">.</span><span class="n">i</span><span class="o">.+(</span><span class="nc">Foo</span><span class="o">.</span><span class="k">this</span><span class="o">.</span><span class="n">j</span><span class="o">);</span>
    <span class="o">&lt;</span><span class="n">stable</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">accessor</span><span class="o">&gt;</span> <span class="k">def</span> <span class="n">k</span><span class="k">:</span> <span class="kt">String</span> <span class="o">=</span> <span class="nc">Foo</span><span class="o">.</span><span class="k">this</span><span class="o">.</span><span class="n">k</span><span class="o">;</span>
    <span class="k">def</span> <span class="n">wibble</span><span class="k">:</span> <span class="kt">scala.collection.immutable.IndexedSeq</span><span class="o">[</span><span class="kt">Int</span><span class="o">]</span> <span class="k">=</span> <span class="n">scala</span><span class="o">.</span><span class="k">this</span><span class="o">.</span><span class="nc">Predef</span><span class="o">.</span><span class="n">augmentString</span><span class="o">(</span><span class="nc">Foo</span><span class="o">.</span><span class="k">this</span><span class="o">.</span><span class="n">k</span><span class="o">).</span><span class="n">map</span><span class="o">[</span><span class="kt">Int</span>, <span class="kt">scala.collection.immutable.IndexedSeq</span><span class="o">[</span><span class="kt">Int</span><span class="o">]](((</span><span class="n">c</span><span class="k">:</span> <span class="kt">Char</span><span class="o">)</span> <span class="k">=&gt;</span> <span class="n">c</span><span class="o">.*(</span><span class="mi">2</span><span class="o">)))(</span><span class="n">scala</span><span class="o">.</span><span class="k">this</span><span class="o">.</span><span class="nc">Predef</span><span class="o">.</span><span class="n">fallbackStringCanBuildFrom</span><span class="o">[</span><span class="kt">Int</span><span class="o">])</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre>
</div>

<p>The main difference is that types are assigned. For example our <code class="highlighter-rouge">val i</code> has type <code class="highlighter-rouge">Int</code>, as do the other <code class="highlighter-rouge">val</code> of <code class="highlighter-rouge">def</code> in the class. We can also see the synthetic methods added to access the values of <code class="highlighter-rouge">i</code>, <code class="highlighter-rouge">j</code>, and <code class="highlighter-rouge">k</code>.</p>

<p>You can experiment around with your own files to see changes in the output of <code class="highlighter-rouge">scalac</code>. A warning though, avoid using <code class="highlighter-rouge">extends App</code> constructs as the compiler treats them in a specific way and that may clutter your output.</p>

<p>The full output for the example above follows:</p>

<div class="language-scala highlighter-rouge"><pre class="highlight"><code> <span class="n">scalac</span> <span class="o">-</span><span class="nc">Xprint</span><span class="k">:</span><span class="kt">all</span> <span class="kt">sample.scala</span> 
<span class="nc">Picked</span> <span class="n">up</span> <span class="nc">JAVA_TOOL_OPTIONS</span><span class="k">:</span> <span class="kt">-Dfile.encoding</span><span class="o">=</span><span class="nc">UTF</span><span class="o">-</span><span class="mi">8</span>
<span class="o">[[</span><span class="kt">syntax</span> <span class="kt">trees</span> <span class="kt">at</span> <span class="kt">end</span> <span class="kt">of</span>                    <span class="kt">parser</span><span class="o">]]</span> <span class="c1">// sample.scala
</span><span class="k">package</span> <span class="err">&lt;</span><span class="nn">empty</span><span class="o">&gt;</span> <span class="o">{</span>
  <span class="k">class</span> <span class="nc">Foo</span> <span class="k">extends</span> <span class="n">scala</span><span class="o">.</span><span class="nc">AnyRef</span> <span class="o">{</span>
    <span class="k">def</span> <span class="o">&lt;</span><span class="n">init</span><span class="o">&gt;()</span> <span class="k">=</span> <span class="o">{</span>
      <span class="k">super</span><span class="o">.&lt;</span><span class="n">init</span><span class="o">&gt;();</span>
      <span class="o">()</span>
    <span class="o">};</span>
    <span class="k">val</span> <span class="n">i</span> <span class="k">=</span> <span class="mi">23</span><span class="o">;</span>
    <span class="k">val</span> <span class="n">j</span> <span class="k">=</span> <span class="s">"blah"</span><span class="o">;</span>
    <span class="k">val</span> <span class="n">k</span> <span class="k">=</span> <span class="n">i</span><span class="o">.</span><span class="nc">$plus</span><span class="o">(</span><span class="n">j</span><span class="o">);</span>
    <span class="k">def</span> <span class="n">wibble</span> <span class="k">=</span> <span class="n">k</span><span class="o">.</span><span class="n">map</span><span class="o">(((</span><span class="n">c</span><span class="o">)</span> <span class="k">=&gt;</span> <span class="n">c</span><span class="o">.</span><span class="nc">$times</span><span class="o">(</span><span class="mi">2</span><span class="o">)))</span>
  <span class="o">}</span>
<span class="o">}</span>

<span class="o">[[</span><span class="kt">syntax</span> <span class="kt">trees</span> <span class="kt">at</span> <span class="kt">end</span> <span class="kt">of</span>                     <span class="kt">namer</span><span class="o">]]</span> <span class="c1">// sample.scala: tree is unchanged since parser
</span><span class="o">[[</span><span class="kt">syntax</span> <span class="kt">trees</span> <span class="kt">at</span> <span class="kt">end</span> <span class="kt">of</span>            <span class="kt">packageobjects</span><span class="o">]]</span> <span class="c1">// sample.scala: tree is unchanged since parser
</span><span class="o">[[</span><span class="kt">syntax</span> <span class="kt">trees</span> <span class="kt">at</span> <span class="kt">end</span> <span class="kt">of</span>                     <span class="k">type</span><span class="kt">r</span><span class="o">]]</span> <span class="c1">// sample.scala
</span><span class="k">package</span> <span class="err">&lt;</span><span class="nn">empty</span><span class="o">&gt;</span> <span class="o">{</span>
  <span class="k">class</span> <span class="nc">Foo</span> <span class="k">extends</span> <span class="n">scala</span><span class="o">.</span><span class="nc">AnyRef</span> <span class="o">{</span>
    <span class="k">def</span> <span class="o">&lt;</span><span class="n">init</span><span class="o">&gt;()</span><span class="k">:</span> <span class="kt">Foo</span> <span class="o">=</span> <span class="o">{</span>
      <span class="nc">Foo</span><span class="o">.</span><span class="k">super</span><span class="o">.&lt;</span><span class="n">init</span><span class="o">&gt;();</span>
      <span class="o">()</span>
    <span class="o">};</span>
    <span class="k">private</span><span class="o">[</span><span class="kt">this</span><span class="o">]</span> <span class="k">val</span> <span class="n">i</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="mi">23</span><span class="o">;</span>
    <span class="o">&lt;</span><span class="n">stable</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">accessor</span><span class="o">&gt;</span> <span class="k">def</span> <span class="n">i</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="nc">Foo</span><span class="o">.</span><span class="k">this</span><span class="o">.</span><span class="n">i</span><span class="o">;</span>
    <span class="k">private</span><span class="o">[</span><span class="kt">this</span><span class="o">]</span> <span class="k">val</span> <span class="n">j</span><span class="k">:</span> <span class="kt">String</span> <span class="o">=</span> <span class="s">"blah"</span><span class="o">;</span>
    <span class="o">&lt;</span><span class="n">stable</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">accessor</span><span class="o">&gt;</span> <span class="k">def</span> <span class="n">j</span><span class="k">:</span> <span class="kt">String</span> <span class="o">=</span> <span class="nc">Foo</span><span class="o">.</span><span class="k">this</span><span class="o">.</span><span class="n">j</span><span class="o">;</span>
    <span class="k">private</span><span class="o">[</span><span class="kt">this</span><span class="o">]</span> <span class="k">val</span> <span class="n">k</span><span class="k">:</span> <span class="kt">String</span> <span class="o">=</span> <span class="nc">Foo</span><span class="o">.</span><span class="k">this</span><span class="o">.</span><span class="n">i</span><span class="o">.+(</span><span class="nc">Foo</span><span class="o">.</span><span class="k">this</span><span class="o">.</span><span class="n">j</span><span class="o">);</span>
    <span class="o">&lt;</span><span class="n">stable</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">accessor</span><span class="o">&gt;</span> <span class="k">def</span> <span class="n">k</span><span class="k">:</span> <span class="kt">String</span> <span class="o">=</span> <span class="nc">Foo</span><span class="o">.</span><span class="k">this</span><span class="o">.</span><span class="n">k</span><span class="o">;</span>
    <span class="k">def</span> <span class="n">wibble</span><span class="k">:</span> <span class="kt">scala.collection.immutable.IndexedSeq</span><span class="o">[</span><span class="kt">Int</span><span class="o">]</span> <span class="k">=</span> <span class="n">scala</span><span class="o">.</span><span class="k">this</span><span class="o">.</span><span class="nc">Predef</span><span class="o">.</span><span class="n">augmentString</span><span class="o">(</span><span class="nc">Foo</span><span class="o">.</span><span class="k">this</span><span class="o">.</span><span class="n">k</span><span class="o">).</span><span class="n">map</span><span class="o">[</span><span class="kt">Int</span>, <span class="kt">scala.collection.immutable.IndexedSeq</span><span class="o">[</span><span class="kt">Int</span><span class="o">]](((</span><span class="n">c</span><span class="k">:</span> <span class="kt">Char</span><span class="o">)</span> <span class="k">=&gt;</span> <span class="n">c</span><span class="o">.*(</span><span class="mi">2</span><span class="o">)))(</span><span class="n">scala</span><span class="o">.</span><span class="k">this</span><span class="o">.</span><span class="nc">Predef</span><span class="o">.</span><span class="n">fallbackStringCanBuildFrom</span><span class="o">[</span><span class="kt">Int</span><span class="o">])</span>
  <span class="o">}</span>
<span class="o">}</span>

<span class="o">[[</span><span class="kt">syntax</span> <span class="kt">trees</span> <span class="kt">at</span> <span class="kt">end</span> <span class="kt">of</span>                    <span class="kt">patmat</span><span class="o">]]</span> <span class="c1">// sample.scala: tree is unchanged since typer
</span><span class="o">[[</span><span class="kt">syntax</span> <span class="kt">trees</span> <span class="kt">at</span> <span class="kt">end</span> <span class="kt">of</span>            <span class="kt">superaccessors</span><span class="o">]]</span> <span class="c1">// sample.scala: tree is unchanged since typer
</span><span class="o">[[</span><span class="kt">syntax</span> <span class="kt">trees</span> <span class="kt">at</span> <span class="kt">end</span> <span class="kt">of</span>                <span class="kt">extmethods</span><span class="o">]]</span> <span class="c1">// sample.scala: tree is unchanged since typer
</span><span class="o">[[</span><span class="kt">syntax</span> <span class="kt">trees</span> <span class="kt">at</span> <span class="kt">end</span> <span class="kt">of</span>                   <span class="kt">pickler</span><span class="o">]]</span> <span class="c1">// sample.scala: tree is unchanged since typer
</span><span class="o">[[</span><span class="kt">syntax</span> <span class="kt">trees</span> <span class="kt">at</span> <span class="kt">end</span> <span class="kt">of</span>                 <span class="kt">refchecks</span><span class="o">]]</span> <span class="c1">// sample.scala: tree is unchanged since typer
</span><span class="o">[[</span><span class="kt">syntax</span> <span class="kt">trees</span> <span class="kt">at</span> <span class="kt">end</span> <span class="kt">of</span>                   <span class="kt">uncurry</span><span class="o">]]</span> <span class="c1">// sample.scala
</span><span class="k">package</span> <span class="err">&lt;</span><span class="nn">empty</span><span class="o">&gt;</span> <span class="o">{</span>
  <span class="k">class</span> <span class="nc">Foo</span> <span class="k">extends</span> <span class="nc">Object</span> <span class="o">{</span>
    <span class="k">def</span> <span class="o">&lt;</span><span class="n">init</span><span class="o">&gt;()</span><span class="k">:</span> <span class="kt">Foo</span> <span class="o">=</span> <span class="o">{</span>
      <span class="nc">Foo</span><span class="o">.</span><span class="k">super</span><span class="o">.&lt;</span><span class="n">init</span><span class="o">&gt;();</span>
      <span class="o">()</span>
    <span class="o">};</span>
    <span class="k">private</span><span class="o">[</span><span class="kt">this</span><span class="o">]</span> <span class="k">val</span> <span class="n">i</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="mi">23</span><span class="o">;</span>
    <span class="o">&lt;</span><span class="n">stable</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">accessor</span><span class="o">&gt;</span> <span class="k">def</span> <span class="n">i</span><span class="o">()</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="nc">Foo</span><span class="o">.</span><span class="k">this</span><span class="o">.</span><span class="n">i</span><span class="o">;</span>
    <span class="k">private</span><span class="o">[</span><span class="kt">this</span><span class="o">]</span> <span class="k">val</span> <span class="n">j</span><span class="k">:</span> <span class="kt">String</span> <span class="o">=</span> <span class="s">"blah"</span><span class="o">;</span>
    <span class="o">&lt;</span><span class="n">stable</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">accessor</span><span class="o">&gt;</span> <span class="k">def</span> <span class="n">j</span><span class="o">()</span><span class="k">:</span> <span class="kt">String</span> <span class="o">=</span> <span class="nc">Foo</span><span class="o">.</span><span class="k">this</span><span class="o">.</span><span class="n">j</span><span class="o">;</span>
    <span class="k">private</span><span class="o">[</span><span class="kt">this</span><span class="o">]</span> <span class="k">val</span> <span class="n">k</span><span class="k">:</span> <span class="kt">String</span> <span class="o">=</span> <span class="nc">Foo</span><span class="o">.</span><span class="k">this</span><span class="o">.</span><span class="n">i</span><span class="o">().+(</span><span class="nc">Foo</span><span class="o">.</span><span class="k">this</span><span class="o">.</span><span class="n">j</span><span class="o">());</span>
    <span class="o">&lt;</span><span class="n">stable</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">accessor</span><span class="o">&gt;</span> <span class="k">def</span> <span class="n">k</span><span class="o">()</span><span class="k">:</span> <span class="kt">String</span> <span class="o">=</span> <span class="nc">Foo</span><span class="o">.</span><span class="k">this</span><span class="o">.</span><span class="n">k</span><span class="o">;</span>
    <span class="k">def</span> <span class="n">wibble</span><span class="o">()</span><span class="k">:</span> <span class="kt">scala.collection.immutable.IndexedSeq</span><span class="o">[</span><span class="kt">Int</span><span class="o">]</span> <span class="k">=</span> <span class="n">scala</span><span class="o">.</span><span class="k">this</span><span class="o">.</span><span class="nc">Predef</span><span class="o">.</span><span class="n">augmentString</span><span class="o">(</span><span class="nc">Foo</span><span class="o">.</span><span class="k">this</span><span class="o">.</span><span class="n">k</span><span class="o">()).</span><span class="n">map</span><span class="o">[</span><span class="kt">Int</span>, <span class="kt">scala.collection.immutable.IndexedSeq</span><span class="o">[</span><span class="kt">Int</span><span class="o">]]({</span>
      <span class="nd">@SerialVersionUID</span><span class="o">(</span><span class="n">value</span> <span class="k">=</span> <span class="mi">0</span><span class="o">)</span> <span class="k">final</span> <span class="o">&lt;</span><span class="n">synthetic</span><span class="o">&gt;</span> <span class="k">class</span> <span class="nc">$anonfun</span> <span class="k">extends</span> <span class="n">scala</span><span class="o">.</span><span class="n">runtime</span><span class="o">.</span><span class="nc">AbstractFunction1</span><span class="o">[</span><span class="kt">Char</span>,<span class="kt">Int</span><span class="o">]</span> <span class="k">with</span> <span class="nc">Serializable</span> <span class="o">{</span>
        <span class="k">def</span> <span class="o">&lt;</span><span class="n">init</span><span class="o">&gt;()</span><span class="k">:</span> <span class="kt">&lt;$anon:</span> <span class="kt">Char</span> <span class="o">=&gt;</span> <span class="nc">Int</span><span class="o">&gt;</span> <span class="k">=</span> <span class="o">{</span>
          <span class="nc">$anonfun</span><span class="o">.</span><span class="k">super</span><span class="o">.&lt;</span><span class="n">init</span><span class="o">&gt;();</span>
          <span class="o">()</span>
        <span class="o">};</span>
        <span class="k">final</span> <span class="k">def</span> <span class="n">apply</span><span class="o">(</span><span class="n">c</span><span class="k">:</span> <span class="kt">Char</span><span class="o">)</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="n">c</span><span class="o">.*(</span><span class="mi">2</span><span class="o">)</span>
      <span class="o">};</span>
      <span class="o">(</span><span class="k">new</span> <span class="o">&lt;</span><span class="nc">$anon</span><span class="k">:</span> <span class="kt">Char</span> <span class="o">=&gt;</span> <span class="nc">Int</span><span class="o">&gt;()</span><span class="k">:</span> <span class="kt">Char</span> <span class="o">=&gt;</span> <span class="nc">Int</span><span class="o">)</span>
    <span class="o">},</span> <span class="n">scala</span><span class="o">.</span><span class="k">this</span><span class="o">.</span><span class="nc">Predef</span><span class="o">.</span><span class="n">fallbackStringCanBuildFrom</span><span class="o">[</span><span class="kt">Int</span><span class="o">]())</span>
  <span class="o">}</span>
<span class="o">}</span>

<span class="o">[[</span><span class="kt">syntax</span> <span class="kt">trees</span> <span class="kt">at</span> <span class="kt">end</span> <span class="kt">of</span>                 <span class="kt">tailcalls</span><span class="o">]]</span> <span class="c1">// sample.scala: tree is unchanged since uncurry
</span><span class="o">[[</span><span class="kt">syntax</span> <span class="kt">trees</span> <span class="kt">at</span> <span class="kt">end</span> <span class="kt">of</span>                <span class="kt">specialize</span><span class="o">]]</span> <span class="c1">// sample.scala: tree is unchanged since uncurry
</span><span class="o">[[</span><span class="kt">syntax</span> <span class="kt">trees</span> <span class="kt">at</span> <span class="kt">end</span> <span class="kt">of</span>             <span class="kt">explicitouter</span><span class="o">]]</span> <span class="c1">// sample.scala
</span><span class="k">package</span> <span class="err">&lt;</span><span class="nn">empty</span><span class="o">&gt;</span> <span class="o">{</span>
  <span class="k">class</span> <span class="nc">Foo</span> <span class="k">extends</span> <span class="nc">Object</span> <span class="o">{</span>
    <span class="k">def</span> <span class="o">&lt;</span><span class="n">init</span><span class="o">&gt;()</span><span class="k">:</span> <span class="kt">Foo</span> <span class="o">=</span> <span class="o">{</span>
      <span class="nc">Foo</span><span class="o">.</span><span class="k">super</span><span class="o">.&lt;</span><span class="n">init</span><span class="o">&gt;();</span>
      <span class="o">()</span>
    <span class="o">};</span>
    <span class="k">private</span><span class="o">[</span><span class="kt">this</span><span class="o">]</span> <span class="k">val</span> <span class="n">i</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="mi">23</span><span class="o">;</span>
    <span class="o">&lt;</span><span class="n">stable</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">accessor</span><span class="o">&gt;</span> <span class="k">def</span> <span class="n">i</span><span class="o">()</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="nc">Foo</span><span class="o">.</span><span class="k">this</span><span class="o">.</span><span class="n">i</span><span class="o">;</span>
    <span class="k">private</span><span class="o">[</span><span class="kt">this</span><span class="o">]</span> <span class="k">val</span> <span class="n">j</span><span class="k">:</span> <span class="kt">String</span> <span class="o">=</span> <span class="s">"blah"</span><span class="o">;</span>
    <span class="o">&lt;</span><span class="n">stable</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">accessor</span><span class="o">&gt;</span> <span class="k">def</span> <span class="n">j</span><span class="o">()</span><span class="k">:</span> <span class="kt">String</span> <span class="o">=</span> <span class="nc">Foo</span><span class="o">.</span><span class="k">this</span><span class="o">.</span><span class="n">j</span><span class="o">;</span>
    <span class="k">private</span><span class="o">[</span><span class="kt">this</span><span class="o">]</span> <span class="k">val</span> <span class="n">k</span><span class="k">:</span> <span class="kt">String</span> <span class="o">=</span> <span class="nc">Foo</span><span class="o">.</span><span class="k">this</span><span class="o">.</span><span class="n">i</span><span class="o">().+(</span><span class="nc">Foo</span><span class="o">.</span><span class="k">this</span><span class="o">.</span><span class="n">j</span><span class="o">());</span>
    <span class="o">&lt;</span><span class="n">stable</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">accessor</span><span class="o">&gt;</span> <span class="k">def</span> <span class="n">k</span><span class="o">()</span><span class="k">:</span> <span class="kt">String</span> <span class="o">=</span> <span class="nc">Foo</span><span class="o">.</span><span class="k">this</span><span class="o">.</span><span class="n">k</span><span class="o">;</span>
    <span class="k">def</span> <span class="n">wibble</span><span class="o">()</span><span class="k">:</span> <span class="kt">scala.collection.immutable.IndexedSeq</span><span class="o">[</span><span class="kt">Int</span><span class="o">]</span> <span class="k">=</span> <span class="n">scala</span><span class="o">.</span><span class="k">this</span><span class="o">.</span><span class="nc">Predef</span><span class="o">.</span><span class="n">augmentString</span><span class="o">(</span><span class="nc">Foo</span><span class="o">.</span><span class="k">this</span><span class="o">.</span><span class="n">k</span><span class="o">()).</span><span class="n">map</span><span class="o">[</span><span class="kt">Int</span>, <span class="kt">scala.collection.immutable.IndexedSeq</span><span class="o">[</span><span class="kt">Int</span><span class="o">]]({</span>
      <span class="nd">@SerialVersionUID</span><span class="o">(</span><span class="n">value</span> <span class="k">=</span> <span class="mi">0</span><span class="o">)</span> <span class="k">final</span> <span class="o">&lt;</span><span class="n">synthetic</span><span class="o">&gt;</span> <span class="k">class</span> <span class="nc">$anonfun</span> <span class="k">extends</span> <span class="n">scala</span><span class="o">.</span><span class="n">runtime</span><span class="o">.</span><span class="nc">AbstractFunction1</span><span class="o">[</span><span class="kt">Char</span>,<span class="kt">Int</span><span class="o">]</span> <span class="k">with</span> <span class="nc">Serializable</span> <span class="o">{</span>
        <span class="k">def</span> <span class="o">&lt;</span><span class="n">init</span><span class="o">&gt;(</span><span class="nc">$outer</span><span class="k">:</span> <span class="kt">Foo.this.</span><span class="k">type</span><span class="o">)</span><span class="k">:</span> <span class="kt">&lt;$anon:</span> <span class="kt">Char</span> <span class="o">=&gt;</span> <span class="nc">Int</span><span class="o">&gt;</span> <span class="k">=</span> <span class="o">{</span>
          <span class="nc">$anonfun</span><span class="o">.</span><span class="k">super</span><span class="o">.&lt;</span><span class="n">init</span><span class="o">&gt;();</span>
          <span class="o">()</span>
        <span class="o">};</span>
        <span class="k">final</span> <span class="k">def</span> <span class="n">apply</span><span class="o">(</span><span class="n">c</span><span class="k">:</span> <span class="kt">Char</span><span class="o">)</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="n">c</span><span class="o">.*(</span><span class="mi">2</span><span class="o">);</span>
        <span class="o">&lt;</span><span class="n">synthetic</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">paramaccessor</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">artifact</span><span class="o">&gt;</span> <span class="k">private</span><span class="o">[</span><span class="kt">this</span><span class="o">]</span> <span class="k">val</span> <span class="nc">$outer</span><span class="k">:</span> <span class="kt">Foo.this.</span><span class="k">type</span> <span class="o">=</span> <span class="k">_</span><span class="o">;</span>
        <span class="o">&lt;</span><span class="n">synthetic</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">stable</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">artifact</span><span class="o">&gt;</span> <span class="k">def</span> <span class="nc">$outer</span><span class="o">()</span><span class="k">:</span> <span class="kt">Foo.this.</span><span class="k">type</span> <span class="o">=</span> <span class="nc">$anonfun</span><span class="o">.</span><span class="k">this</span><span class="o">.</span><span class="nc">$outer</span>
      <span class="o">};</span>
      <span class="o">(</span><span class="k">new</span> <span class="o">&lt;</span><span class="nc">$anon</span><span class="k">:</span> <span class="kt">Char</span> <span class="o">=&gt;</span> <span class="nc">Int</span><span class="o">&gt;(</span><span class="nc">Foo</span><span class="o">.</span><span class="k">this</span><span class="o">)</span><span class="k">:</span> <span class="kt">Char</span> <span class="o">=&gt;</span> <span class="nc">Int</span><span class="o">)</span>
    <span class="o">},</span> <span class="n">scala</span><span class="o">.</span><span class="k">this</span><span class="o">.</span><span class="nc">Predef</span><span class="o">.</span><span class="n">fallbackStringCanBuildFrom</span><span class="o">[</span><span class="kt">Int</span><span class="o">]())</span>
  <span class="o">}</span>
<span class="o">}</span>

<span class="o">[[</span><span class="kt">syntax</span> <span class="kt">trees</span> <span class="kt">at</span> <span class="kt">end</span> <span class="kt">of</span>                   <span class="kt">erasure</span><span class="o">]]</span> <span class="c1">// sample.scala
</span><span class="k">package</span> <span class="err">&lt;</span><span class="nn">empty</span><span class="o">&gt;</span> <span class="o">{</span>
  <span class="k">class</span> <span class="nc">Foo</span> <span class="k">extends</span> <span class="nc">Object</span> <span class="o">{</span>
    <span class="k">def</span> <span class="o">&lt;</span><span class="n">init</span><span class="o">&gt;()</span><span class="k">:</span> <span class="kt">Foo</span> <span class="o">=</span> <span class="o">{</span>
      <span class="nc">Foo</span><span class="o">.</span><span class="k">super</span><span class="o">.&lt;</span><span class="n">init</span><span class="o">&gt;();</span>
      <span class="o">()</span>
    <span class="o">};</span>
    <span class="k">private</span><span class="o">[</span><span class="kt">this</span><span class="o">]</span> <span class="k">val</span> <span class="n">i</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="mi">23</span><span class="o">;</span>
    <span class="o">&lt;</span><span class="n">stable</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">accessor</span><span class="o">&gt;</span> <span class="k">def</span> <span class="n">i</span><span class="o">()</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="nc">Foo</span><span class="o">.</span><span class="k">this</span><span class="o">.</span><span class="n">i</span><span class="o">;</span>
    <span class="k">private</span><span class="o">[</span><span class="kt">this</span><span class="o">]</span> <span class="k">val</span> <span class="n">j</span><span class="k">:</span> <span class="kt">String</span> <span class="o">=</span> <span class="s">"blah"</span><span class="o">;</span>
    <span class="o">&lt;</span><span class="n">stable</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">accessor</span><span class="o">&gt;</span> <span class="k">def</span> <span class="n">j</span><span class="o">()</span><span class="k">:</span> <span class="kt">String</span> <span class="o">=</span> <span class="nc">Foo</span><span class="o">.</span><span class="k">this</span><span class="o">.</span><span class="n">j</span><span class="o">;</span>
    <span class="k">private</span><span class="o">[</span><span class="kt">this</span><span class="o">]</span> <span class="k">val</span> <span class="n">k</span><span class="k">:</span> <span class="kt">String</span> <span class="o">=</span> <span class="nc">Foo</span><span class="o">.</span><span class="k">this</span><span class="o">.</span><span class="n">i</span><span class="o">().+(</span><span class="nc">Foo</span><span class="o">.</span><span class="k">this</span><span class="o">.</span><span class="n">j</span><span class="o">());</span>
    <span class="o">&lt;</span><span class="n">stable</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">accessor</span><span class="o">&gt;</span> <span class="k">def</span> <span class="n">k</span><span class="o">()</span><span class="k">:</span> <span class="kt">String</span> <span class="o">=</span> <span class="nc">Foo</span><span class="o">.</span><span class="k">this</span><span class="o">.</span><span class="n">k</span><span class="o">;</span>
    <span class="k">def</span> <span class="n">wibble</span><span class="o">()</span><span class="k">:</span> <span class="kt">scala.collection.immutable.IndexedSeq</span> <span class="o">=</span> <span class="k">new</span> <span class="n">collection</span><span class="o">.</span><span class="n">immutable</span><span class="o">.</span><span class="nc">StringOps</span><span class="o">(</span><span class="n">scala</span><span class="o">.</span><span class="k">this</span><span class="o">.</span><span class="nc">Predef</span><span class="o">.</span><span class="n">augmentString</span><span class="o">(</span><span class="nc">Foo</span><span class="o">.</span><span class="k">this</span><span class="o">.</span><span class="n">k</span><span class="o">()).</span><span class="nc">$asInstanceOf</span><span class="o">[</span><span class="kt">String</span><span class="o">]()).</span><span class="n">map</span><span class="o">({</span>
  <span class="nd">@SerialVersionUID</span><span class="o">(</span><span class="n">value</span> <span class="k">=</span> <span class="mi">0</span><span class="o">)</span> <span class="k">final</span> <span class="o">&lt;</span><span class="n">synthetic</span><span class="o">&gt;</span> <span class="k">class</span> <span class="nc">$anonfun</span> <span class="k">extends</span> <span class="n">scala</span><span class="o">.</span><span class="n">runtime</span><span class="o">.</span><span class="nc">AbstractFunction1</span> <span class="k">with</span> <span class="nc">Serializable</span> <span class="o">{</span>
    <span class="k">def</span> <span class="o">&lt;</span><span class="n">init</span><span class="o">&gt;(</span><span class="nc">$outer</span><span class="k">:</span> <span class="kt">Foo</span><span class="o">)</span><span class="k">:</span> <span class="kt">&lt;$anon:</span> <span class="kt">Function1&gt;</span> <span class="o">=</span> <span class="o">{</span>
      <span class="nc">$anonfun</span><span class="o">.</span><span class="k">super</span><span class="o">.&lt;</span><span class="n">init</span><span class="o">&gt;();</span>
      <span class="o">()</span>
    <span class="o">};</span>
    <span class="k">final</span> <span class="k">def</span> <span class="n">apply</span><span class="o">(</span><span class="n">c</span><span class="k">:</span> <span class="kt">Char</span><span class="o">)</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="n">c</span><span class="o">.*(</span><span class="mi">2</span><span class="o">);</span>
    <span class="o">&lt;</span><span class="n">synthetic</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">paramaccessor</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">artifact</span><span class="o">&gt;</span> <span class="k">private</span><span class="o">[</span><span class="kt">this</span><span class="o">]</span> <span class="k">val</span> <span class="nc">$outer</span><span class="k">:</span> <span class="kt">Foo</span> <span class="o">=</span> <span class="k">_</span><span class="o">;</span>
    <span class="o">&lt;</span><span class="n">synthetic</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">stable</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">artifact</span><span class="o">&gt;</span> <span class="k">def</span> <span class="nc">$outer</span><span class="o">()</span><span class="k">:</span> <span class="kt">Foo</span> <span class="o">=</span> <span class="nc">$anonfun</span><span class="o">.</span><span class="k">this</span><span class="o">.</span><span class="nc">$outer</span><span class="o">;</span>
    <span class="k">final</span> <span class="o">&lt;</span><span class="n">bridge</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">artifact</span><span class="o">&gt;</span> <span class="k">def</span> <span class="n">apply</span><span class="o">(</span><span class="n">v1</span><span class="k">:</span> <span class="kt">Object</span><span class="o">)</span><span class="k">:</span> <span class="kt">Object</span> <span class="o">=</span> <span class="n">scala</span><span class="o">.</span><span class="nc">Int</span><span class="o">.</span><span class="n">box</span><span class="o">(</span><span class="nc">$anonfun</span><span class="o">.</span><span class="k">this</span><span class="o">.</span><span class="n">apply</span><span class="o">(</span><span class="n">unbox</span><span class="o">(</span><span class="n">v1</span><span class="o">)))</span>
  <span class="o">};</span>
  <span class="o">(</span><span class="k">new</span> <span class="o">&lt;</span><span class="nc">$anon</span><span class="k">:</span> <span class="kt">Function1&gt;</span><span class="o">(</span><span class="kt">Foo.this</span><span class="o">)</span><span class="kt">:</span> <span class="kt">Function1</span><span class="o">)</span>
<span class="o">},</span> <span class="n">scala</span><span class="o">.</span><span class="k">this</span><span class="o">.</span><span class="nc">Predef</span><span class="o">.</span><span class="n">fallbackStringCanBuildFrom</span><span class="o">()).</span><span class="nc">$asInstanceOf</span><span class="o">[</span><span class="kt">scala.collection.immutable.IndexedSeq</span><span class="o">]()</span>
  <span class="o">}</span>
<span class="o">}</span>

<span class="o">[[</span><span class="kt">syntax</span> <span class="kt">trees</span> <span class="kt">at</span> <span class="kt">end</span> <span class="kt">of</span>               <span class="kt">posterasure</span><span class="o">]]</span> <span class="c1">// sample.scala
</span><span class="k">package</span> <span class="err">&lt;</span><span class="nn">empty</span><span class="o">&gt;</span> <span class="o">{</span>
  <span class="k">class</span> <span class="nc">Foo</span> <span class="k">extends</span> <span class="nc">Object</span> <span class="o">{</span>
    <span class="k">def</span> <span class="o">&lt;</span><span class="n">init</span><span class="o">&gt;()</span><span class="k">:</span> <span class="kt">Foo</span> <span class="o">=</span> <span class="o">{</span>
      <span class="nc">Foo</span><span class="o">.</span><span class="k">super</span><span class="o">.&lt;</span><span class="n">init</span><span class="o">&gt;();</span>
      <span class="o">()</span>
    <span class="o">};</span>
    <span class="k">private</span><span class="o">[</span><span class="kt">this</span><span class="o">]</span> <span class="k">val</span> <span class="n">i</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="mi">23</span><span class="o">;</span>
    <span class="o">&lt;</span><span class="n">stable</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">accessor</span><span class="o">&gt;</span> <span class="k">def</span> <span class="n">i</span><span class="o">()</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="nc">Foo</span><span class="o">.</span><span class="k">this</span><span class="o">.</span><span class="n">i</span><span class="o">;</span>
    <span class="k">private</span><span class="o">[</span><span class="kt">this</span><span class="o">]</span> <span class="k">val</span> <span class="n">j</span><span class="k">:</span> <span class="kt">String</span> <span class="o">=</span> <span class="s">"blah"</span><span class="o">;</span>
    <span class="o">&lt;</span><span class="n">stable</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">accessor</span><span class="o">&gt;</span> <span class="k">def</span> <span class="n">j</span><span class="o">()</span><span class="k">:</span> <span class="kt">String</span> <span class="o">=</span> <span class="nc">Foo</span><span class="o">.</span><span class="k">this</span><span class="o">.</span><span class="n">j</span><span class="o">;</span>
    <span class="k">private</span><span class="o">[</span><span class="kt">this</span><span class="o">]</span> <span class="k">val</span> <span class="n">k</span><span class="k">:</span> <span class="kt">String</span> <span class="o">=</span> <span class="nc">Foo</span><span class="o">.</span><span class="k">this</span><span class="o">.</span><span class="n">i</span><span class="o">().+(</span><span class="nc">Foo</span><span class="o">.</span><span class="k">this</span><span class="o">.</span><span class="n">j</span><span class="o">());</span>
    <span class="o">&lt;</span><span class="n">stable</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">accessor</span><span class="o">&gt;</span> <span class="k">def</span> <span class="n">k</span><span class="o">()</span><span class="k">:</span> <span class="kt">String</span> <span class="o">=</span> <span class="nc">Foo</span><span class="o">.</span><span class="k">this</span><span class="o">.</span><span class="n">k</span><span class="o">;</span>
    <span class="k">def</span> <span class="n">wibble</span><span class="o">()</span><span class="k">:</span> <span class="kt">scala.collection.immutable.IndexedSeq</span> <span class="o">=</span> <span class="k">new</span> <span class="n">collection</span><span class="o">.</span><span class="n">immutable</span><span class="o">.</span><span class="nc">StringOps</span><span class="o">(</span><span class="n">scala</span><span class="o">.</span><span class="k">this</span><span class="o">.</span><span class="nc">Predef</span><span class="o">.</span><span class="n">augmentString</span><span class="o">(</span><span class="nc">Foo</span><span class="o">.</span><span class="k">this</span><span class="o">.</span><span class="n">k</span><span class="o">())).</span><span class="n">map</span><span class="o">({</span>
  <span class="nd">@SerialVersionUID</span><span class="o">(</span><span class="n">value</span> <span class="k">=</span> <span class="mi">0</span><span class="o">)</span> <span class="k">final</span> <span class="o">&lt;</span><span class="n">synthetic</span><span class="o">&gt;</span> <span class="k">class</span> <span class="nc">$anonfun</span> <span class="k">extends</span> <span class="n">scala</span><span class="o">.</span><span class="n">runtime</span><span class="o">.</span><span class="nc">AbstractFunction1</span> <span class="k">with</span> <span class="nc">Serializable</span> <span class="o">{</span>
    <span class="k">def</span> <span class="o">&lt;</span><span class="n">init</span><span class="o">&gt;(</span><span class="nc">$outer</span><span class="k">:</span> <span class="kt">Foo</span><span class="o">)</span><span class="k">:</span> <span class="kt">&lt;$anon:</span> <span class="kt">Function1&gt;</span> <span class="o">=</span> <span class="o">{</span>
      <span class="nc">$anonfun</span><span class="o">.</span><span class="k">super</span><span class="o">.&lt;</span><span class="n">init</span><span class="o">&gt;();</span>
      <span class="o">()</span>
    <span class="o">};</span>
    <span class="k">final</span> <span class="k">def</span> <span class="n">apply</span><span class="o">(</span><span class="n">c</span><span class="k">:</span> <span class="kt">Char</span><span class="o">)</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="n">c</span><span class="o">.*(</span><span class="mi">2</span><span class="o">);</span>
    <span class="o">&lt;</span><span class="n">synthetic</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">paramaccessor</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">artifact</span><span class="o">&gt;</span> <span class="k">private</span><span class="o">[</span><span class="kt">this</span><span class="o">]</span> <span class="k">val</span> <span class="nc">$outer</span><span class="k">:</span> <span class="kt">Foo</span> <span class="o">=</span> <span class="k">_</span><span class="o">;</span>
    <span class="o">&lt;</span><span class="n">synthetic</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">stable</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">artifact</span><span class="o">&gt;</span> <span class="k">def</span> <span class="nc">$outer</span><span class="o">()</span><span class="k">:</span> <span class="kt">Foo</span> <span class="o">=</span> <span class="nc">$anonfun</span><span class="o">.</span><span class="k">this</span><span class="o">.</span><span class="nc">$outer</span><span class="o">;</span>
    <span class="k">final</span> <span class="o">&lt;</span><span class="n">bridge</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">artifact</span><span class="o">&gt;</span> <span class="k">def</span> <span class="n">apply</span><span class="o">(</span><span class="n">v1</span><span class="k">:</span> <span class="kt">Object</span><span class="o">)</span><span class="k">:</span> <span class="kt">Object</span> <span class="o">=</span> <span class="n">scala</span><span class="o">.</span><span class="nc">Int</span><span class="o">.</span><span class="n">box</span><span class="o">(</span><span class="nc">$anonfun</span><span class="o">.</span><span class="k">this</span><span class="o">.</span><span class="n">apply</span><span class="o">(</span><span class="n">unbox</span><span class="o">(</span><span class="n">v1</span><span class="o">)))</span>
  <span class="o">};</span>
  <span class="o">(</span><span class="k">new</span> <span class="o">&lt;</span><span class="nc">$anon</span><span class="k">:</span> <span class="kt">Function1&gt;</span><span class="o">(</span><span class="kt">Foo.this</span><span class="o">)</span><span class="kt">:</span> <span class="kt">Function1</span><span class="o">)</span>
<span class="o">},</span> <span class="n">scala</span><span class="o">.</span><span class="k">this</span><span class="o">.</span><span class="nc">Predef</span><span class="o">.</span><span class="n">fallbackStringCanBuildFrom</span><span class="o">()).</span><span class="nc">$asInstanceOf</span><span class="o">[</span><span class="kt">scala.collection.immutable.IndexedSeq</span><span class="o">]()</span>
  <span class="o">}</span>
<span class="o">}</span>

<span class="o">[[</span><span class="kt">syntax</span> <span class="kt">trees</span> <span class="kt">at</span> <span class="kt">end</span> <span class="kt">of</span>                  <span class="kt">lazyvals</span><span class="o">]]</span> <span class="c1">// sample.scala: tree is unchanged since posterasure
</span><span class="o">[[</span><span class="kt">syntax</span> <span class="kt">trees</span> <span class="kt">at</span> <span class="kt">end</span> <span class="kt">of</span>                <span class="kt">lambdalift</span><span class="o">]]</span> <span class="c1">// sample.scala
</span><span class="k">package</span> <span class="err">&lt;</span><span class="nn">empty</span><span class="o">&gt;</span> <span class="o">{</span>
  <span class="k">class</span> <span class="nc">Foo</span> <span class="k">extends</span> <span class="nc">Object</span> <span class="o">{</span>
    <span class="k">def</span> <span class="o">&lt;</span><span class="n">init</span><span class="o">&gt;()</span><span class="k">:</span> <span class="kt">Foo</span> <span class="o">=</span> <span class="o">{</span>
      <span class="nc">Foo</span><span class="o">.</span><span class="k">super</span><span class="o">.&lt;</span><span class="n">init</span><span class="o">&gt;();</span>
      <span class="o">()</span>
    <span class="o">};</span>
    <span class="k">private</span><span class="o">[</span><span class="kt">this</span><span class="o">]</span> <span class="k">val</span> <span class="n">i</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="mi">23</span><span class="o">;</span>
    <span class="o">&lt;</span><span class="n">stable</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">accessor</span><span class="o">&gt;</span> <span class="k">def</span> <span class="n">i</span><span class="o">()</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="nc">Foo</span><span class="o">.</span><span class="k">this</span><span class="o">.</span><span class="n">i</span><span class="o">;</span>
    <span class="k">private</span><span class="o">[</span><span class="kt">this</span><span class="o">]</span> <span class="k">val</span> <span class="n">j</span><span class="k">:</span> <span class="kt">String</span> <span class="o">=</span> <span class="s">"blah"</span><span class="o">;</span>
    <span class="o">&lt;</span><span class="n">stable</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">accessor</span><span class="o">&gt;</span> <span class="k">def</span> <span class="n">j</span><span class="o">()</span><span class="k">:</span> <span class="kt">String</span> <span class="o">=</span> <span class="nc">Foo</span><span class="o">.</span><span class="k">this</span><span class="o">.</span><span class="n">j</span><span class="o">;</span>
    <span class="k">private</span><span class="o">[</span><span class="kt">this</span><span class="o">]</span> <span class="k">val</span> <span class="n">k</span><span class="k">:</span> <span class="kt">String</span> <span class="o">=</span> <span class="nc">Foo</span><span class="o">.</span><span class="k">this</span><span class="o">.</span><span class="n">i</span><span class="o">().+(</span><span class="nc">Foo</span><span class="o">.</span><span class="k">this</span><span class="o">.</span><span class="n">j</span><span class="o">());</span>
    <span class="o">&lt;</span><span class="n">stable</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">accessor</span><span class="o">&gt;</span> <span class="k">def</span> <span class="n">k</span><span class="o">()</span><span class="k">:</span> <span class="kt">String</span> <span class="o">=</span> <span class="nc">Foo</span><span class="o">.</span><span class="k">this</span><span class="o">.</span><span class="n">k</span><span class="o">;</span>
    <span class="k">def</span> <span class="n">wibble</span><span class="o">()</span><span class="k">:</span> <span class="kt">scala.collection.immutable.IndexedSeq</span> <span class="o">=</span> <span class="k">new</span> <span class="n">collection</span><span class="o">.</span><span class="n">immutable</span><span class="o">.</span><span class="nc">StringOps</span><span class="o">(</span><span class="n">scala</span><span class="o">.</span><span class="k">this</span><span class="o">.</span><span class="nc">Predef</span><span class="o">.</span><span class="n">augmentString</span><span class="o">(</span><span class="nc">Foo</span><span class="o">.</span><span class="k">this</span><span class="o">.</span><span class="n">k</span><span class="o">())).</span><span class="n">map</span><span class="o">({</span>
  <span class="o">(</span><span class="k">new</span> <span class="o">&lt;</span><span class="nc">$anon</span><span class="k">:</span> <span class="kt">Function1&gt;</span><span class="o">(</span><span class="kt">Foo.this</span><span class="o">)</span><span class="kt">:</span> <span class="kt">Function1</span><span class="o">)</span>
<span class="o">},</span> <span class="n">scala</span><span class="o">.</span><span class="k">this</span><span class="o">.</span><span class="nc">Predef</span><span class="o">.</span><span class="n">fallbackStringCanBuildFrom</span><span class="o">()).</span><span class="nc">$asInstanceOf</span><span class="o">[</span><span class="kt">scala.collection.immutable.IndexedSeq</span><span class="o">]();</span>
    <span class="nd">@SerialVersionUID</span><span class="o">(</span><span class="n">value</span> <span class="k">=</span> <span class="mi">0</span><span class="o">)</span> <span class="k">final</span> <span class="o">&lt;</span><span class="n">synthetic</span><span class="o">&gt;</span> <span class="k">class</span> <span class="nc">$anonfun$wibble$1</span> <span class="k">extends</span> <span class="n">scala</span><span class="o">.</span><span class="n">runtime</span><span class="o">.</span><span class="nc">AbstractFunction1</span> <span class="k">with</span> <span class="nc">Serializable</span> <span class="o">{</span>
      <span class="k">def</span> <span class="o">&lt;</span><span class="n">init</span><span class="o">&gt;(</span><span class="nc">$outer</span><span class="k">:</span> <span class="kt">Foo</span><span class="o">)</span><span class="k">:</span> <span class="kt">&lt;$anon:</span> <span class="kt">Function1&gt;</span> <span class="o">=</span> <span class="o">{</span>
        <span class="nc">$anonfun$wibble$1</span><span class="o">.</span><span class="k">super</span><span class="o">.&lt;</span><span class="n">init</span><span class="o">&gt;();</span>
        <span class="o">()</span>
      <span class="o">};</span>
      <span class="k">final</span> <span class="k">def</span> <span class="n">apply</span><span class="o">(</span><span class="n">c</span><span class="k">:</span> <span class="kt">Char</span><span class="o">)</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="n">c</span><span class="o">.*(</span><span class="mi">2</span><span class="o">);</span>
      <span class="o">&lt;</span><span class="n">synthetic</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">paramaccessor</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">artifact</span><span class="o">&gt;</span> <span class="k">private</span><span class="o">[</span><span class="kt">this</span><span class="o">]</span> <span class="k">val</span> <span class="nc">$outer</span><span class="k">:</span> <span class="kt">Foo</span> <span class="o">=</span> <span class="k">_</span><span class="o">;</span>
      <span class="o">&lt;</span><span class="n">synthetic</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">stable</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">artifact</span><span class="o">&gt;</span> <span class="k">def</span> <span class="nc">$outer</span><span class="o">()</span><span class="k">:</span> <span class="kt">Foo</span> <span class="o">=</span> <span class="nc">$anonfun$wibble$1</span><span class="o">.</span><span class="k">this</span><span class="o">.</span><span class="nc">$outer</span><span class="o">;</span>
      <span class="k">final</span> <span class="o">&lt;</span><span class="n">bridge</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">artifact</span><span class="o">&gt;</span> <span class="k">def</span> <span class="n">apply</span><span class="o">(</span><span class="n">v1</span><span class="k">:</span> <span class="kt">Object</span><span class="o">)</span><span class="k">:</span> <span class="kt">Object</span> <span class="o">=</span> <span class="n">scala</span><span class="o">.</span><span class="nc">Int</span><span class="o">.</span><span class="n">box</span><span class="o">(</span><span class="nc">$anonfun$wibble$1</span><span class="o">.</span><span class="k">this</span><span class="o">.</span><span class="n">apply</span><span class="o">(</span><span class="n">scala</span><span class="o">.</span><span class="nc">Char</span><span class="o">.</span><span class="n">unbox</span><span class="o">(</span><span class="n">v1</span><span class="o">)))</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span>

<span class="o">[[</span><span class="kt">syntax</span> <span class="kt">trees</span> <span class="kt">at</span> <span class="kt">end</span> <span class="kt">of</span>              <span class="kt">constructors</span><span class="o">]]</span> <span class="c1">// sample.scala
</span><span class="k">package</span> <span class="err">&lt;</span><span class="nn">empty</span><span class="o">&gt;</span> <span class="o">{</span>
  <span class="k">class</span> <span class="nc">Foo</span> <span class="k">extends</span> <span class="nc">Object</span> <span class="o">{</span>
    <span class="k">private</span><span class="o">[</span><span class="kt">this</span><span class="o">]</span> <span class="k">val</span> <span class="n">i</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="k">_</span><span class="o">;</span>
    <span class="o">&lt;</span><span class="n">stable</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">accessor</span><span class="o">&gt;</span> <span class="k">def</span> <span class="n">i</span><span class="o">()</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="nc">Foo</span><span class="o">.</span><span class="k">this</span><span class="o">.</span><span class="n">i</span><span class="o">;</span>
    <span class="k">private</span><span class="o">[</span><span class="kt">this</span><span class="o">]</span> <span class="k">val</span> <span class="n">j</span><span class="k">:</span> <span class="kt">String</span> <span class="o">=</span> <span class="k">_</span><span class="o">;</span>
    <span class="o">&lt;</span><span class="n">stable</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">accessor</span><span class="o">&gt;</span> <span class="k">def</span> <span class="n">j</span><span class="o">()</span><span class="k">:</span> <span class="kt">String</span> <span class="o">=</span> <span class="nc">Foo</span><span class="o">.</span><span class="k">this</span><span class="o">.</span><span class="n">j</span><span class="o">;</span>
    <span class="k">private</span><span class="o">[</span><span class="kt">this</span><span class="o">]</span> <span class="k">val</span> <span class="n">k</span><span class="k">:</span> <span class="kt">String</span> <span class="o">=</span> <span class="k">_</span><span class="o">;</span>
    <span class="o">&lt;</span><span class="n">stable</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">accessor</span><span class="o">&gt;</span> <span class="k">def</span> <span class="n">k</span><span class="o">()</span><span class="k">:</span> <span class="kt">String</span> <span class="o">=</span> <span class="nc">Foo</span><span class="o">.</span><span class="k">this</span><span class="o">.</span><span class="n">k</span><span class="o">;</span>
    <span class="k">def</span> <span class="n">wibble</span><span class="o">()</span><span class="k">:</span> <span class="kt">scala.collection.immutable.IndexedSeq</span> <span class="o">=</span> <span class="k">new</span> <span class="n">collection</span><span class="o">.</span><span class="n">immutable</span><span class="o">.</span><span class="nc">StringOps</span><span class="o">(</span><span class="n">scala</span><span class="o">.</span><span class="k">this</span><span class="o">.</span><span class="nc">Predef</span><span class="o">.</span><span class="n">augmentString</span><span class="o">(</span><span class="nc">Foo</span><span class="o">.</span><span class="k">this</span><span class="o">.</span><span class="n">k</span><span class="o">())).</span><span class="n">map</span><span class="o">({</span>
  <span class="o">(</span><span class="k">new</span> <span class="o">&lt;</span><span class="nc">$anon</span><span class="k">:</span> <span class="kt">Function1&gt;</span><span class="o">(</span><span class="kt">Foo.this</span><span class="o">)</span><span class="kt">:</span> <span class="kt">Function1</span><span class="o">)</span>
<span class="o">},</span> <span class="n">scala</span><span class="o">.</span><span class="k">this</span><span class="o">.</span><span class="nc">Predef</span><span class="o">.</span><span class="n">fallbackStringCanBuildFrom</span><span class="o">()).</span><span class="nc">$asInstanceOf</span><span class="o">[</span><span class="kt">scala.collection.immutable.IndexedSeq</span><span class="o">]();</span>
    <span class="nd">@SerialVersionUID</span><span class="o">(</span><span class="n">value</span> <span class="k">=</span> <span class="mi">0</span><span class="o">)</span> <span class="k">final</span> <span class="o">&lt;</span><span class="n">synthetic</span><span class="o">&gt;</span> <span class="k">class</span> <span class="nc">$anonfun$wibble$1</span> <span class="k">extends</span> <span class="n">scala</span><span class="o">.</span><span class="n">runtime</span><span class="o">.</span><span class="nc">AbstractFunction1</span> <span class="k">with</span> <span class="nc">Serializable</span> <span class="o">{</span>
      <span class="k">final</span> <span class="k">def</span> <span class="n">apply</span><span class="o">(</span><span class="n">c</span><span class="k">:</span> <span class="kt">Char</span><span class="o">)</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="n">c</span><span class="o">.*(</span><span class="mi">2</span><span class="o">);</span>
      <span class="k">final</span> <span class="o">&lt;</span><span class="n">bridge</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">artifact</span><span class="o">&gt;</span> <span class="k">def</span> <span class="n">apply</span><span class="o">(</span><span class="n">v1</span><span class="k">:</span> <span class="kt">Object</span><span class="o">)</span><span class="k">:</span> <span class="kt">Object</span> <span class="o">=</span> <span class="n">scala</span><span class="o">.</span><span class="nc">Int</span><span class="o">.</span><span class="n">box</span><span class="o">(</span><span class="nc">$anonfun$wibble$1</span><span class="o">.</span><span class="k">this</span><span class="o">.</span><span class="n">apply</span><span class="o">(</span><span class="n">scala</span><span class="o">.</span><span class="nc">Char</span><span class="o">.</span><span class="n">unbox</span><span class="o">(</span><span class="n">v1</span><span class="o">)));</span>
      <span class="k">def</span> <span class="o">&lt;</span><span class="n">init</span><span class="o">&gt;(</span><span class="nc">$outer</span><span class="k">:</span> <span class="kt">Foo</span><span class="o">)</span><span class="k">:</span> <span class="kt">&lt;$anon:</span> <span class="kt">Function1&gt;</span> <span class="o">=</span> <span class="o">{</span>
        <span class="nc">$anonfun$wibble$1</span><span class="o">.</span><span class="k">super</span><span class="o">.&lt;</span><span class="n">init</span><span class="o">&gt;();</span>
        <span class="o">()</span>
      <span class="o">}</span>
    <span class="o">};</span>
    <span class="k">def</span> <span class="o">&lt;</span><span class="n">init</span><span class="o">&gt;()</span><span class="k">:</span> <span class="kt">Foo</span> <span class="o">=</span> <span class="o">{</span>
      <span class="nc">Foo</span><span class="o">.</span><span class="k">super</span><span class="o">.&lt;</span><span class="n">init</span><span class="o">&gt;();</span>
      <span class="nc">Foo</span><span class="o">.</span><span class="k">this</span><span class="o">.</span><span class="n">i</span> <span class="k">=</span> <span class="mi">23</span><span class="o">;</span>
      <span class="nc">Foo</span><span class="o">.</span><span class="k">this</span><span class="o">.</span><span class="n">j</span> <span class="k">=</span> <span class="s">"blah"</span><span class="o">;</span>
      <span class="nc">Foo</span><span class="o">.</span><span class="k">this</span><span class="o">.</span><span class="n">k</span> <span class="k">=</span> <span class="nc">Foo</span><span class="o">.</span><span class="k">this</span><span class="o">.</span><span class="n">i</span><span class="o">().+(</span><span class="nc">Foo</span><span class="o">.</span><span class="k">this</span><span class="o">.</span><span class="n">j</span><span class="o">());</span>
      <span class="o">()</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span>

<span class="o">[[</span><span class="kt">syntax</span> <span class="kt">trees</span> <span class="kt">at</span> <span class="kt">end</span> <span class="kt">of</span>                   <span class="kt">flatten</span><span class="o">]]</span> <span class="c1">// sample.scala
</span><span class="k">package</span> <span class="err">&lt;</span><span class="nn">empty</span><span class="o">&gt;</span> <span class="o">{</span>
  <span class="k">class</span> <span class="nc">Foo</span> <span class="k">extends</span> <span class="nc">Object</span> <span class="o">{</span>
    <span class="k">private</span><span class="o">[</span><span class="kt">this</span><span class="o">]</span> <span class="k">val</span> <span class="n">i</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="k">_</span><span class="o">;</span>
    <span class="o">&lt;</span><span class="n">stable</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">accessor</span><span class="o">&gt;</span> <span class="k">def</span> <span class="n">i</span><span class="o">()</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="nc">Foo</span><span class="o">.</span><span class="k">this</span><span class="o">.</span><span class="n">i</span><span class="o">;</span>
    <span class="k">private</span><span class="o">[</span><span class="kt">this</span><span class="o">]</span> <span class="k">val</span> <span class="n">j</span><span class="k">:</span> <span class="kt">String</span> <span class="o">=</span> <span class="k">_</span><span class="o">;</span>
    <span class="o">&lt;</span><span class="n">stable</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">accessor</span><span class="o">&gt;</span> <span class="k">def</span> <span class="n">j</span><span class="o">()</span><span class="k">:</span> <span class="kt">String</span> <span class="o">=</span> <span class="nc">Foo</span><span class="o">.</span><span class="k">this</span><span class="o">.</span><span class="n">j</span><span class="o">;</span>
    <span class="k">private</span><span class="o">[</span><span class="kt">this</span><span class="o">]</span> <span class="k">val</span> <span class="n">k</span><span class="k">:</span> <span class="kt">String</span> <span class="o">=</span> <span class="k">_</span><span class="o">;</span>
    <span class="o">&lt;</span><span class="n">stable</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">accessor</span><span class="o">&gt;</span> <span class="k">def</span> <span class="n">k</span><span class="o">()</span><span class="k">:</span> <span class="kt">String</span> <span class="o">=</span> <span class="nc">Foo</span><span class="o">.</span><span class="k">this</span><span class="o">.</span><span class="n">k</span><span class="o">;</span>
    <span class="k">def</span> <span class="n">wibble</span><span class="o">()</span><span class="k">:</span> <span class="kt">scala.collection.immutable.IndexedSeq</span> <span class="o">=</span> <span class="k">new</span> <span class="n">collection</span><span class="o">.</span><span class="n">immutable</span><span class="o">.</span><span class="nc">StringOps</span><span class="o">(</span><span class="n">scala</span><span class="o">.</span><span class="k">this</span><span class="o">.</span><span class="nc">Predef</span><span class="o">.</span><span class="n">augmentString</span><span class="o">(</span><span class="nc">Foo</span><span class="o">.</span><span class="k">this</span><span class="o">.</span><span class="n">k</span><span class="o">())).</span><span class="n">map</span><span class="o">({</span>
  <span class="o">(</span><span class="k">new</span> <span class="o">&lt;</span><span class="nc">$anon</span><span class="k">:</span> <span class="kt">Function1&gt;</span><span class="o">(</span><span class="kt">Foo.this</span><span class="o">)</span><span class="kt">:</span> <span class="kt">Function1</span><span class="o">)</span>
<span class="o">},</span> <span class="n">scala</span><span class="o">.</span><span class="k">this</span><span class="o">.</span><span class="nc">Predef</span><span class="o">.</span><span class="n">fallbackStringCanBuildFrom</span><span class="o">()).</span><span class="nc">$asInstanceOf</span><span class="o">[</span><span class="kt">scala.collection.immutable.IndexedSeq</span><span class="o">]();</span>
    <span class="k">def</span> <span class="o">&lt;</span><span class="n">init</span><span class="o">&gt;()</span><span class="k">:</span> <span class="kt">Foo</span> <span class="o">=</span> <span class="o">{</span>
      <span class="nc">Foo</span><span class="o">.</span><span class="k">super</span><span class="o">.&lt;</span><span class="n">init</span><span class="o">&gt;();</span>
      <span class="nc">Foo</span><span class="o">.</span><span class="k">this</span><span class="o">.</span><span class="n">i</span> <span class="k">=</span> <span class="mi">23</span><span class="o">;</span>
      <span class="nc">Foo</span><span class="o">.</span><span class="k">this</span><span class="o">.</span><span class="n">j</span> <span class="k">=</span> <span class="s">"blah"</span><span class="o">;</span>
      <span class="nc">Foo</span><span class="o">.</span><span class="k">this</span><span class="o">.</span><span class="n">k</span> <span class="k">=</span> <span class="nc">Foo</span><span class="o">.</span><span class="k">this</span><span class="o">.</span><span class="n">i</span><span class="o">().+(</span><span class="nc">Foo</span><span class="o">.</span><span class="k">this</span><span class="o">.</span><span class="n">j</span><span class="o">());</span>
      <span class="o">()</span>
    <span class="o">}</span>
  <span class="o">};</span>
  <span class="nd">@SerialVersionUID</span><span class="o">(</span><span class="n">value</span> <span class="k">=</span> <span class="mi">0</span><span class="o">)</span> <span class="k">final</span> <span class="o">&lt;</span><span class="n">synthetic</span><span class="o">&gt;</span> <span class="k">class</span> <span class="nc">anonfun$wibble$1</span> <span class="k">extends</span> <span class="n">scala</span><span class="o">.</span><span class="n">runtime</span><span class="o">.</span><span class="nc">AbstractFunction1</span> <span class="k">with</span> <span class="nc">Serializable</span> <span class="o">{</span>
    <span class="k">final</span> <span class="k">def</span> <span class="n">apply</span><span class="o">(</span><span class="n">c</span><span class="k">:</span> <span class="kt">Char</span><span class="o">)</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="n">c</span><span class="o">.*(</span><span class="mi">2</span><span class="o">);</span>
    <span class="k">final</span> <span class="o">&lt;</span><span class="n">bridge</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">artifact</span><span class="o">&gt;</span> <span class="k">def</span> <span class="n">apply</span><span class="o">(</span><span class="n">v1</span><span class="k">:</span> <span class="kt">Object</span><span class="o">)</span><span class="k">:</span> <span class="kt">Object</span> <span class="o">=</span> <span class="n">scala</span><span class="o">.</span><span class="nc">Int</span><span class="o">.</span><span class="n">box</span><span class="o">(</span><span class="n">anonfun$wibble$1</span><span class="o">.</span><span class="k">this</span><span class="o">.</span><span class="n">apply</span><span class="o">(</span><span class="n">scala</span><span class="o">.</span><span class="nc">Char</span><span class="o">.</span><span class="n">unbox</span><span class="o">(</span><span class="n">v1</span><span class="o">)));</span>
    <span class="k">def</span> <span class="o">&lt;</span><span class="n">init</span><span class="o">&gt;(</span><span class="nc">$outer</span><span class="k">:</span> <span class="kt">Foo</span><span class="o">)</span><span class="k">:</span> <span class="kt">&lt;$anon:</span> <span class="kt">Function1&gt;</span> <span class="o">=</span> <span class="o">{</span>
      <span class="n">anonfun$wibble$1</span><span class="o">.</span><span class="k">super</span><span class="o">.&lt;</span><span class="n">init</span><span class="o">&gt;();</span>
      <span class="o">()</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span>

<span class="o">[[</span><span class="kt">syntax</span> <span class="kt">trees</span> <span class="kt">at</span> <span class="kt">end</span> <span class="kt">of</span>                     <span class="kt">mixin</span><span class="o">]]</span> <span class="c1">// sample.scala: tree is unchanged since flatten
</span><span class="o">[[</span><span class="kt">syntax</span> <span class="kt">trees</span> <span class="kt">at</span> <span class="kt">end</span> <span class="kt">of</span>                   <span class="kt">cleanup</span><span class="o">]]</span> <span class="c1">// sample.scala: tree is unchanged since flatten
</span><span class="o">[[</span><span class="kt">syntax</span> <span class="kt">trees</span> <span class="kt">at</span> <span class="kt">end</span> <span class="kt">of</span>                <span class="kt">delambdafy</span><span class="o">]]</span> <span class="c1">// sample.scala: tree is unchanged since flatten
</span><span class="o">[[</span><span class="kt">syntax</span> <span class="kt">trees</span> <span class="kt">at</span> <span class="kt">end</span> <span class="kt">of</span>                     <span class="kt">icode</span><span class="o">]]</span> <span class="c1">// sample.scala: tree is unchanged since flatten
</span><span class="o">[[</span><span class="kt">syntax</span> <span class="kt">trees</span> <span class="kt">at</span> <span class="kt">end</span> <span class="kt">of</span>                       <span class="kt">jvm</span><span class="o">]]</span> <span class="c1">// sample.scala: tree is unchanged since flatten
</span></code></pre>
</div>

<p>Want to contribute? <a href="https://github.com/typelevel/scala/edit/typelevel-readme/src/main/resources/microsite/docs/phases.md">Edit this file</a></p>
</section></div></div></div></div><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script><script src="/scala/highlight/highlight.pack.js"></script><script>hljs.configure({
languages:['scala','java','bash']
});
hljs.initHighlighting();
             </script><script src="/scala/js/main.js"></script></body></html>